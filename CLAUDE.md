# Vibe Coder

ã‚¹ãƒãƒ›ã‹ã‚‰ Claude Code ã‚’ç›´æ„Ÿçš„ã«æ“ä½œã§ãã‚‹ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–ãƒªãƒ¢ãƒ¼ãƒˆé–‹ç™ºç’°å¢ƒ

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Vibe Coder ã¯ã€ã‚¹ãƒãƒ›ã‹ã‚‰ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ Claude Code ã‚’å®Ÿè¡Œã§ãã‚‹é©æ–°çš„ãªé–‹ç™ºãƒ„ãƒ¼ãƒ«ã§ã™ã€‚WebRTC P2P é€šä¿¡ã«ã‚ˆã‚Šã€ã©ã“ã‹ã‚‰ã§ã‚‚å®‰å…¨ã«è‡ªå®…ã®é–‹ç™ºç’°å¢ƒã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚

### ä¸»è¦ãªä¾¡å€¤ææ¡ˆ

- **ãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**: ã‚¹ãƒãƒ›ã«æœ€é©åŒ–ã•ã‚ŒãŸç›´æ„Ÿçš„ãªUI
- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆæ¥ç¶š**: å®Œå…¨P2Pé€šä¿¡ã§ã‚³ãƒ¼ãƒ‰ãŒå¤–éƒ¨ã«æ¼ã‚Œãªã„
- **ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—å®Ÿè¡Œ**: ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¢ã‚¤ã‚³ãƒ³ã§ç¬æ™‚å®Ÿè¡Œ
- **éŸ³å£°æ“ä½œ**: è‡ªç„¶è¨€èªã§ã®éŸ³å£°ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´å‡¦ç†ï¼‰
- **ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹**: è‡ªå®…é–‹ç™ºç’°å¢ƒã¸ã®å®‰å…¨ãªãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶š

## âœ¨ ä¸»è¦æ©Ÿèƒ½

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ©Ÿèƒ½ (PWA)

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«**: Claude Code ã®å‡ºåŠ›ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
- **éŸ³å£°èªè­˜**: Web Speech API ã«ã‚ˆã‚‹è‡ªç„¶è¨€èªã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ï¼ˆAndroid/iPhoneå¯¾å¿œï¼‰
- **ã‚¯ã‚¤ãƒƒã‚¯ã‚³ãƒãƒ³ãƒ‰**: ã‚¹ãƒ­ãƒƒãƒˆå¼ã®ã‚¢ã‚¤ã‚³ãƒ³ãƒ™ãƒ¼ã‚¹ã‚³ãƒãƒ³ãƒ‰é¸æŠ
- **ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆç®¡ç†**: JSONãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: WebRTCæ¥ç¶šã®è‡ªå‹•å¾©æ—§

### ãƒ›ã‚¹ãƒˆæ©Ÿèƒ½ (Docker)

- **Claude Codeçµ±åˆ**: å®‰å…¨ãªãƒ—ãƒ­ã‚»ã‚¹å®Ÿè¡Œç’°å¢ƒ
- **WebRTC P2P**: NATè¶Šãˆã«ã‚ˆã‚‹ç›´æ¥æ¥ç¶š
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: 8æ¡ã‚­ãƒ¼ã«ã‚ˆã‚‹èªè¨¼ãƒ»æ¥ç¶šç®¡ç†
- **~/.claudeè¨­å®š**: ãƒã‚¦ãƒ³ãƒˆæ–¹å¼ã§ã®Claudeè¨­å®šåˆ©ç”¨

### PWAé…ä¿¡ã‚µãƒ¼ãƒãƒ¼ (Vercel)

- **å…¬å¼ã‚µãƒ¼ãƒãƒ¼**: `https://www.vibe-coder.space`
- **PWAé™çš„é…ä¿¡**: React PWAã®é…ä¿¡ã®ã¿
- **HTTPSè¨¼æ˜æ›¸**: æœ‰åŠ¹ãªè¨¼æ˜æ›¸ã§ã®ã‚»ã‚­ãƒ¥ã‚¢é…ä¿¡

## ğŸ” èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ãƒ»WebRTCé€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

### ğŸ“‹ ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»•æ§˜æ›¸

**ã™ã¹ã¦ã®èªè¨¼ãƒ»WebRTCé€šä¿¡ã¯ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä»•æ§˜æ›¸ã«å³å¯†ã«æº–æ‹ :**

ğŸ“„ **[WEBRTC_PROTOCOL.md](./WEBRTC_PROTOCOL.md)**

### å®Ÿè£…æ™‚ã®å³å®ˆäº‹é …

1. **å®Œå…¨ãƒ—ãƒ­ãƒˆã‚³ãƒ«æº–æ‹ **: `WEBRTC_PROTOCOL.md` ã‚’å¿…ãšå‚ç…§
2. **ã‚¢ãƒ‰ãƒ›ãƒƒã‚¯å¯¾å¿œç¦æ­¢**: ä»•æ§˜æ›¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„å‡¦ç†ã¯å®Ÿè£…ã—ãªã„
3. **å¤‰æ›´æ‰‹é †**: æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å…ˆã«æ›´æ–°ã—ã¦ã‹ã‚‰å®Ÿè£…
4. **WebSocketé€šä¿¡ã®ã¿**: REST APIä½¿ç”¨ã¯ä¸€åˆ‡ç¦æ­¢
5. **30åˆ†å†èªè¨¼ãƒ«ãƒ¼ãƒ«**: 30åˆ†ä»¥ä¸Šåˆ‡æ–­æ™‚ã¯å®Œå…¨å†èªè¨¼å¿…é ˆ

### èªè¨¼ãƒ•ãƒ­ãƒ¼æ¦‚è¦

1. **Host IDèªè¨¼**: 8æ¡ã‚­ãƒ¼å…¥åŠ›ã§ãƒ›ã‚¹ãƒˆç‰¹å®š
2. **TOTPèªè¨¼**: 6æ¡ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼ˆAuthenticatorã‚¢ãƒ—ãƒªï¼‰
3. **JWTç™ºè¡Œ**: èªè¨¼æˆåŠŸå¾Œã«ãƒˆãƒ¼ã‚¯ãƒ³ç™ºè¡Œ
4. **WebRTCæ¥ç¶š**: SDP Offer/Answer + ICEå€™è£œäº¤æ›
5. **P2Pç¢ºç«‹**: DataChannelé–‹é€šã€Claude Codeå®Ÿè¡Œé–‹å§‹

### å†æ¥ç¶šå‡¦ç†

- **5ç§’ä»¥å†…**: è‡ªå‹•å†æ¥ç¶šï¼ˆICEå€™è£œå†é€ä¿¡ï¼‰
- **10ç§’ä»¥å†…**: WebRTCå†ç¢ºç«‹ï¼ˆOffer/Answerå†äº¤æ›ï¼‰
- **30åˆ†ä»¥ä¸Š**: å®Œå…¨å†èªè¨¼ï¼ˆTOTPå…¥åŠ›å¿…é ˆï¼‰

## ğŸ—ï¸ æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### çµ±ä¸€WebRTCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ (2025å¹´7æœˆå®Œæˆ)

**âœ… Native WebRTC APIçµ±åˆå®Œäº†**: Simple-peerå‰Šé™¤ãƒ»RTCPeerConnectionç›´æ¥ä½¿ç”¨

- **PWAå´**: ãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–WebRTC APIä½¿ç”¨
- **Hostå´**: wrtcãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆNode.jsï¼‰+ Native APIçµ±åˆ
- **çµ±ä¸€API**: RTCPeerConnectionãƒ»RTCDataChannelãƒ»RTCIceCandidate
- **P2Pé€šä¿¡**: å®Œå…¨ãªãƒ”ã‚¢ãƒ„ãƒ¼ãƒ”ã‚¢æ¥ç¶šï¼ˆRESTãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Œå…¨å‰Šé™¤ï¼‰
- **ãƒ—ãƒ­ãƒˆã‚³ãƒ«æº–æ‹ **: [WEBRTC_PROTOCOL.md](./WEBRTC_PROTOCOL.md) ä»•æ§˜æ›¸ã«å®Œå…¨æº–æ‹ 

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (PWA) - apps/web/

- **React PWA**: Vite + TypeScript + TailwindCSS
- **Native WebRTC**: RTCPeerConnectionç›´æ¥ä½¿ç”¨
- **éŸ³å£°èªè­˜**: Web Speech APIï¼ˆwebkitSpeechRecognitionï¼‰
- **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«**: xterm.js + xterm-256color
- **èªè¨¼**: 8æ¡Host ID + TOTP 2FAèªè¨¼
- **é…ä¿¡**: Vercel Static PWA (https://vibe-coder.space)
- **âœ… å®Œå…¨å®Ÿè£…**: UI/UXã€èªè¨¼ãƒ•ãƒ­ãƒ¼ã€WebRTC P2Pã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«

### ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ (Docker) - packages/host/

- **Claude Codeçµ±åˆ**: claude CLIå®Ÿè¡Œãƒ»ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³
- **WebRTC Service**: wrtcãƒ©ã‚¤ãƒ–ãƒ©ãƒª + Native RTCPeerConnection
- **èªè¨¼ã‚·ã‚¹ãƒ†ãƒ **: SessionManager + JWT + TOTPï¼ˆspeakeasyï¼‰
- **æ°¸ç¶šåŒ–**: Host IDãƒ»TOTPç§˜å¯†éµãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³è‡ªå‹•ä¿å­˜
- **Docker**: UID/GIDå‹•çš„è¨­å®šãƒ»~/.claudeè‡ªå‹•ãƒã‚¦ãƒ³ãƒˆ
- **âœ… å®Œå…¨å®Ÿè£…**: WebRTC P2Pã€Claudeçµ±åˆã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€Dockeræ¨©é™è§£æ±º

### WebSocketã‚·ã‚°ãƒŠãƒªãƒ³ã‚° - packages/signaling-ws/

- **Pure WebSocket**: Node.js WebSocketã‚µãƒ¼ãƒãƒ¼ï¼ˆNext.jsä¾å­˜å‰Šé™¤ï¼‰
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: 8æ¡ã‚­ãƒ¼èªè¨¼ãƒ»Offer/Answerä»²ä»‹
- **P2Pæ©‹æ¸¡ã—**: ICEå€™è£œäº¤æ›ãƒ»æ¥ç¶šç¢ºç«‹å¾Œã¯éé–¢ä¸
- **ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹**: ãƒ¡ãƒ¢ãƒªãƒ™ãƒ¼ã‚¹ä¸€æ™‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **Dockerå®Ÿè£…**: ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½ãƒ»5175ãƒãƒ¼ãƒˆå¾…æ©Ÿ
- **âœ… å®Œå…¨å®Ÿè£…**: WebSocket signalingã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

### WebRTCè¨­å®šè©³ç´°

- **STUN**: Google Public (`stun:stun.l.google.com:19302`)
- **Native API**: RTCPeerConnectionãƒ»RTCDataChannel
- **wrtcç’°å¢ƒ**: Node.jsç”¨WebRTCãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆãƒ—ãƒªãƒ“ãƒ«ãƒˆãƒã‚¤ãƒŠãƒªï¼‰
- **P2Pé€šä¿¡**: JSONå½¢å¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»Claude Codeå®Ÿè¡Œçµæœã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°
- **âœ… æŠ€è¡“æ¤œè¨¼**: Docker wrtc.nodeå‹•ä½œç¢ºèªãƒ»ãƒ–ãƒ©ã‚¦ã‚¶æ¥ç¶šæˆåŠŸ

## ğŸ¨ UI/UX ãƒ‡ã‚¶ã‚¤ãƒ³

### ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ

- **ãƒ˜ãƒƒãƒ€ãƒ¼**: 15% - ã‚¿ã‚¤ãƒˆãƒ«ã€éŸ³å£°ãƒœã‚¿ãƒ³ã€è¨­å®šãƒœã‚¿ãƒ³
- **ã‚¿ãƒ¼ãƒŸãƒŠãƒ«**: 75% - xterm.jsè¡¨ç¤ºã‚¨ãƒªã‚¢ï¼ˆãƒ¡ã‚¤ãƒ³ç”»é¢ï¼‰
- **ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆæƒ…å ±**: 5% - ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆè¡¨ç¤º
- **ã‚³ãƒãƒ³ãƒ‰ã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼**: 20% - ã‚¹ãƒ­ãƒƒãƒˆå¼5å€‹è¡¨ç¤º

### ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ†ãƒ¼ãƒ

- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**: ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ï¼ˆslate-900 â†’ slate-700ï¼‰
- **ã‚°ãƒ©ã‚¹ãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ **: é€æ˜åº¦ã¨ã¼ã‹ã—åŠ¹æœ
- **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ‘ãƒ«ã‚¹åŠ¹æœã€ã‚¹ãƒ ãƒ¼ã‚ºãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³
- **ãƒ¢ãƒã‚¤ãƒ«ç‰¹åŒ–**: ã‚¿ãƒƒãƒãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªãƒœã‚¿ãƒ³ã‚µã‚¤ã‚º

### æ“ä½œä½“é¨“

- **xterm.js + xterm-256color**: é«˜æ©Ÿèƒ½ã‚¿ãƒ¼ãƒŸãƒŠãƒ«è¡¨ç¤º
- **ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆæ“ä½œæ€§æ‹…ä¿ï¼‰
- **ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—å®Ÿè¡Œ**: ã‚³ãƒãƒ³ãƒ‰ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¿ãƒƒãƒ—
- **è¦–è¦šãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: å®Ÿè¡Œä¸­ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤º
- **éŸ³å£°éŒ²éŸ³**: ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã§ã®éŒ²éŸ³çŠ¶æ…‹è¡¨ç¤º

## ğŸš€ å°†æ¥ã®æ©Ÿèƒ½æ‹¡å¼µäºˆå®š

### Phase 2: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†å¼·åŒ–

- ã‚³ãƒãƒ³ãƒ‰æ¤œè¨¼ï¼ˆå±é™ºã‚³ãƒãƒ³ãƒ‰ã®åˆ¶é™ï¼‰
- å®Ÿè¡Œæ¨©é™ã®åˆ¶é™
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ç¯„å›²ã®åˆ¶é™
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ãƒ»é€šçŸ¥
- ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚³ãƒãƒ³ãƒ‰ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºã€æ§‹é€ ç¢ºèªï¼‰
- Gitå¤‰æ›´é€šçŸ¥ã€ãƒ“ãƒ«ãƒ‰çŠ¶æ…‹è¡¨ç¤º

### Phase 3: UXæ‹¡å¼µ

- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ï¼ˆUIå†ç¾æŒ‡ç¤ºï¼‰
- WebRTCæ¥ç¶šã®é«˜åº¦ãªè‡ªå‹•å¾©æ—§
- è¤‡æ•°ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã®ç®¡ç†ãƒ»åˆ‡ã‚Šæ›¿ãˆ
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®Claudeè¨­å®šåˆ†é›¢

### Phase 4: ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½

- ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–ãƒ»å±¥æ­´ç®¡ç†
- ãƒãƒ¼ãƒ å‘ã‘ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆå…±æœ‰
- ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
- å®Ÿè¡Œãƒ­ã‚°ã®åˆ†æãƒ»å¯è¦–åŒ–

### Phase 5: é«˜åº¦ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯

- TURN ã‚µãƒ¼ãƒãƒ¼å¯¾å¿œï¼ˆä¼æ¥­ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¯¾å¿œï¼‰
- ãƒãƒ«ãƒãƒ›ã‚¹ãƒˆæ¥ç¶š
- ã‚¯ãƒ©ã‚¦ãƒ‰é–‹ç™ºç’°å¢ƒé€£æº

## ğŸ› ï¸ é–‹ç™ºã®é€²ã‚ã‹ãŸ

### A. é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

**MVP (Phase 1):**

- **ç›®æ¨™**: åŸºæœ¬çš„ãªP2Pæ¥ç¶šã¨Claude Codeå®Ÿè¡Œ
- **æˆæœç‰©**:
  - å‹•ä½œã™ã‚‹PWAã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
  - Dockerãƒ›ã‚¹ãƒˆç’°å¢ƒ
  - WebSocketã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ï¼ˆDockerï¼‰
- **å®Œäº†åŸºæº–**:
  - **å®Ÿéš›ã«UXã‚’ç¢ºèªã—ã¦Claude Codeã§ç°¡å˜ãªã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ãŒã§ãã‚‹ã¨ã“ã‚ã¾ã§**
  - 8æ¡ã‚­ãƒ¼ + 2FAèªè¨¼ãŒå‹•ä½œ
  - Claude Codeã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ãã‚‹
  - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã•ã‚Œã‚‹

### B. æŠ€è¡“å®Ÿè£…é †åº

**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå…ˆè¡Œã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**

1. **PWA UIå®Ÿè£…**ï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ»ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼‰
2. **WebSocketã‚·ã‚°ãƒŠãƒªãƒ³ã‚°**ï¼ˆDocker WebSocket P2Pæ¥ç¶šãƒ†ã‚¹ãƒˆï¼‰
3. **Dockerãƒ›ã‚¹ãƒˆåŸºç›¤**ï¼ˆèªè¨¼ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼‰
4. **Claude Codeçµ±åˆ**ï¼ˆå®Ÿéš›ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼‰
5. **ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰çµ±åˆ**ï¼ˆå…¨ä½“é€šä¿¡ãƒ†ã‚¹ãƒˆï¼‰

**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæ¤œè¨¼æ–¹æ³•:**

- **Chrome DevTools** ã§ã®ãƒ¢ãƒã‚¤ãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ç”»é¢ã‚µã‚¤ã‚ºå¤‰æ›´ã«ã‚ˆã‚‹ ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ç¢ºèª
- ã‚¿ãƒƒãƒæ“ä½œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ

### C. é–‹ç™ºç’°å¢ƒãƒ»ãƒ„ãƒ¼ãƒ«

**å¿…è¦ãªé–‹ç™ºãƒ„ãƒ¼ãƒ«:**

- Node.js + pnpm
- Docker + Docker Compose
- Chrome ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆDevToolsä½¿ç”¨ï¼‰
- VS Codeï¼ˆæ¨å¥¨ã‚¨ãƒ‡ã‚£ã‚¿ï¼‰

**ã‚³ãƒ¼ãƒ‰å“è³ªãƒ„ãƒ¼ãƒ«:**

- **TypeScript**: å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯
- **ESLint**: ã‚³ãƒ¼ãƒ‰ãƒªãƒ³ã‚¿ãƒ¼ï¼ˆReact + TypeScriptå¯¾å¿œï¼‰
- **Prettier**: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
- **Husky**: Git hooksç®¡ç†

**é–‹ç™ºç’°å¢ƒ:**

- **Docker**: ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã¯Dockerã‚³ãƒ³ãƒ†ãƒŠã§é–‹ç™ºã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å•é¡Œã‚’è§£æ±ºã—ã¦ã„ã¾ã™ã€‚
- **Vite**: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰(PWA)ã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦åˆ©ç”¨ã—ã¾ã™ã€‚
- **Vercel CLI**: ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã«åˆ©ç”¨ã—ã¾ã™ã€‚

**Dockeré…å¸ƒ:**

- **ãƒ¬ã‚¸ã‚¹ãƒˆãƒª**: Docker Hub `jl1nie/vibe-coder:latest`
- **ãƒãƒ«ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å¯¾å¿œ**: AMD64ï¼ˆWSL2/Linuxï¼‰+ ARM64ï¼ˆmacOSï¼‰
- `docker buildx` ã§ã®ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãƒ“ãƒ«ãƒ‰

**è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«:**

- **ãƒ¦ãƒ¼ã‚¶ç”¨**: `docker-compose.yml`ï¼ˆæœ€å°é™è¨­å®šï¼‰
- **é–‹ç™ºè€…ç”¨**: `docker-compose.dev.yml`ï¼ˆé–‹ç™ºå‘ã‘è¨­å®šï¼‰
- ç’°å¢ƒå¤‰æ•°: `.env.example` ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæä¾›

**ğŸš¨ é‡è¦: Dockeræ¨©é™è¨­å®šï¼ˆä»–ãƒ¦ãƒ¼ã‚¶ç’°å¢ƒå¯¾å¿œï¼‰**

- **UID/GIDå‹•çš„è¨­å®šå¿…é ˆ**: ä»–ãƒ¦ãƒ¼ã‚¶ç’°å¢ƒã§ã®æ¨©é™ã‚¨ãƒ©ãƒ¼é˜²æ­¢
- **vibe-coderã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: è‡ªå‹•çš„ã«`HOST_UID=$(id -u)`ã€`HOST_GID=$(id -g)`è¨­å®š
- **ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰**: `docker compose build --build-arg HOST_UID=$HOST_UID --build-arg HOST_GID=$HOST_GID`
- **æ‰‹å‹•å®Ÿè¡Œæ™‚**: å¿…ãš`export HOST_UID=$(id -u) && export HOST_GID=$(id -g)`è¨­å®šå¾Œã«ãƒ“ãƒ«ãƒ‰
- **docker-compose.yml**: `version`è¨­å®šå‰Šé™¤ï¼ˆobsoleteè­¦å‘Šå›é¿ï¼‰
- **æ°¸ç¶šåŒ–ãƒ•ã‚¡ã‚¤ãƒ«**: `.vibe-coder-*`ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ã„æ¨©é™ï¼ˆ600ï¼‰ã§ä½œæˆã•ã‚Œã‚‹

**å“è³ªç®¡ç†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«:**

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "es6"],
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx"
  },
  "include": ["src"]
}

// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": ["@typescript-eslint"],
  "rules": {
    "react/react-in-jsx-scope": "off"
  },
  "settings": {
    "react": {
      "version": "detect"
    }
  }
}

// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### D. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

**ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰æ§‹æˆ:**

**Unit Testsï¼ˆ70%ï¼‰- é«˜é€Ÿãƒ»å¤šæ•°**

- React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ­ã‚¸ãƒƒã‚¯
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
- WebRTCæ¥ç¶šãƒ­ã‚¸ãƒƒã‚¯ï¼ˆãƒ¢ãƒƒã‚¯ä½¿ç”¨ï¼‰
- **ãƒ„ãƒ¼ãƒ«**: Vitest + React Testing Library

**Integration Testsï¼ˆ20%ï¼‰- ä¸­ç¨‹åº¦**

- WebRTC ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°é€šä¿¡
- Docker ãƒ›ã‚¹ãƒˆã¨ã®é€£æº
- èªè¨¼ãƒ•ãƒ­ãƒ¼ï¼ˆ8æ¡ã‚­ãƒ¼ + 2FAï¼‰
- **ãƒ„ãƒ¼ãƒ«**: Vitest + vi.mock()ï¼ˆVitestãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ¢ãƒƒã‚¯ï¼‰

**E2E Testsï¼ˆ10%ï¼‰- å°‘æ•°ãƒ»é‡è¦ãƒ•ãƒ­ãƒ¼**

- **ãƒ„ãƒ¼ãƒ«**: Playwright
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼å…¨ä½“
- ãƒ¢ãƒã‚¤ãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- å®Ÿéš›ã®WebRTC P2Pæ¥ç¶š
- **ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š**: 
  - ãƒ†ã‚¹ãƒˆã”ã¨: 60ç§’ï¼ˆCI: 120ç§’ï¼‰
  - ã‚°ãƒ­ãƒ¼ãƒãƒ«: 4åˆ†ï¼ˆCI: 5åˆ†ï¼‰
  - è¨­å®šå ´æ‰€: `playwright.config.ts`

**TDDé–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ï¼ˆt-wadaæ–¹å¼ï¼‰:**

1. **Red**: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä½œæˆï¼ˆå¤±æ•—ï¼‰
2. **Green**: æœ€å°é™ã®å®Ÿè£…ï¼ˆæˆåŠŸï¼‰
3. **Refactor**: ã‚³ãƒ¼ãƒ‰æ”¹å–„
4. **ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—**: å°ã•ãªæ©Ÿèƒ½å˜ä½ã§ç¢ºå®Ÿã«

**ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯çµ±åˆ:**

- **TypeScript**: `tsc --noEmit` ã§å‹ãƒã‚§ãƒƒã‚¯
- **ESLint**: `eslint src/ --ext .ts,.tsx` ã§ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
- **Prettier**: `prettier --check src/` ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèª
- **ãƒ†ã‚¹ãƒˆ**: `vitest run --coverage` ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç’°å¢ƒ:**

- CI/CD: GitHub Actions
- ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶: Playwrightï¼ˆChrome, Safari, Firefoxï¼‰
- ãƒ¢ãƒã‚¤ãƒ«: Playwright device emulation

**E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œè¨­å®š:**

```bash
# E2Eãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆ4åˆ†ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šæ¸ˆã¿ï¼‰
pnpm test:e2e

# E2Eãƒ†ã‚¹ãƒˆå°‚ç”¨ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ©Ÿèƒ½
./scripts/server-manager.sh start-for-tests  # ã‚µãƒ¼ãƒãƒ¼æº–å‚™å®Œäº†å¾…æ©Ÿä»˜ã

# ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š
- WebSocket-only signaling (port 5175)
- PWAé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ (port 5174)
- ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ (port 8080)
- Docker healthcheck: 15ç§’å¾…æ©Ÿ
```

**âš ï¸ Claude Codeå®Ÿè¡Œæ™‚ã®æ³¨æ„:**
- Claude Codeã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯2åˆ†
- E2Eãƒ†ã‚¹ãƒˆå…¨ä½“ã¯4åˆ†ã‹ã‹ã‚‹ãŸã‚ã€Claude CodeçµŒç”±ã§ã¯å®Œèµ°ä¸å¯
- **æ¨å¥¨**: æ‰‹å‹•ã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‹ã‚‰ `pnpm test:e2e` ã‚’å®Ÿè¡Œ

**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œç¢ºå®Ÿæ€§ã®æ–½ç­–:**

**_1. é–‹ç™ºç’°å¢ƒã®å®Œå…¨çµ±ä¸€_**

```bash
# .nvmrc
18.19.0

# package.json ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³å®Œå…¨å›ºå®šï¼‰
{
  "engines": {
    "node": ">=20.0.0"
  },
  "devDependencies": {
    "vitest": "^0.34.6",
    "@playwright/test": "^1.54.0",
    "@testing-library/react": "^13.4.0"
  }
}

# pnpm-lock.yaml ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³å›ºå®š
pnpm install --frozen-lockfile
```

**_2. Dockeré–‹ç™ºç’°å¢ƒï¼ˆç¢ºå®Ÿæ€§é‡è¦–ï¼‰_**

```yaml
# docker-compose.dev.yml
version: '3.8'
services:
  test-runner:
    build:
      context: .
      dockerfile: Dockerfile.test
    volumes:
      - .:/app
      - /app/node_modules # ãƒ›ã‚¹ãƒˆã®node_modulesã¨åˆ†é›¢
    environment:
      - NODE_ENV=test
    command: ppnpm test
```

**_3. pre-commit ãƒ•ãƒƒã‚¯ï¼ˆå¼·åˆ¶å®Ÿè¡Œï¼‰_**

```json
# package.json
{
  "husky": {
    "hooks": {
      "pre-commit": "ppnpm run lint && ppnpm run type-check && ppnpm test"
    }
  },
  "scripts": {
    "lint": "eslint src/ --ext .ts,.tsx",
    "lint:fix": "eslint src/ --ext .ts,.tsx --fix",
    "type-check": "tsc --noEmit",
    "format": "prettier --write src/",
    "format:check": "prettier --check src/",
    "test:clean": "rm -rf node_modules && pnpm i",
    "test:docker": "docker-compose -f docker-compose.dev.yml run test-runner"
  }
}
```

**_4. CI/CDå¤šé‡ãƒã‚§ãƒƒã‚¯_**

```yaml
# .github/workflows/test.yml
name: Test Matrix
on: [push, pull_request]
jobs:
  test:
    strategy:
      matrix:
        os: [ubuntu-latest, macos-latest, windows-latest]
        node: [18.19.0]
    runs-on: ${{ matrix.os }}
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: ${{ matrix.node }}
          cache: 'npm'
      - run: pnpm install
      - run: ppnpm run lint
      - run: ppnpm run type-check
      - run: ppnpm run format:check
      - run: ppnpm test -- --coverage --watchAll=false
      - run: pnpm run test:docker
```

**_5. ãƒ†ã‚¹ãƒˆãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆå®šæœŸå®Ÿè¡Œï¼‰_**

```bash
# ãƒ†ã‚¹ãƒˆç’°å¢ƒæ¤œè¨¼ï¼ˆç¾åœ¨ã¯package.jsonã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè¡Œï¼‰
pnpm typecheck     # TypeScriptå‹ãƒã‚§ãƒƒã‚¯
pnpm lint          # ESLintãƒã‚§ãƒƒã‚¯  
pnpm format:check  # Prettierãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
pnpm test          # å˜ä½“ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```

**_6. æ¯æ—¥ã®ä½œæ¥­é–‹å§‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ_**

```bash
# æ—¥å¸¸é–‹ç™ºé–‹å§‹æ‰‹é †ï¼ˆç¾åœ¨ã®æ§‹æˆï¼‰
echo "ğŸŒ… Daily development start..."
git pull
pnpm install
pnpm typecheck
pnpm lint  
pnpm test:fast
echo "âœ… Ready to code!"
```

**å¤šé‡é˜²å¾¡ç­–ã«ã‚ˆã‚‹ç¢ºå®Ÿæ€§æ‹…ä¿:**

- Dockerç’°å¢ƒã§ã®ãƒ†ã‚¹ãƒˆï¼ˆç’°å¢ƒå·®ç•°ã‚’å®Œå…¨æ’é™¤ï¼‰
- TypeScriptå³æ ¼å‹ãƒã‚§ãƒƒã‚¯ï¼ˆã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã‚¨ãƒ©ãƒ¼æ¤œå‡ºï¼‰
- ESLinté™çš„è§£æï¼ˆã‚³ãƒ¼ãƒ‰å“è³ªä¿è¨¼ï¼‰
- pre-commitãƒ•ãƒƒã‚¯ï¼ˆå•é¡Œã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒŸãƒƒãƒˆé˜²æ­¢ï¼‰
- å®šæœŸçš„ãªãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ï¼ˆå•é¡Œã®æ—©æœŸç™ºè¦‹ï¼‰
- è¤‡æ•°OSç’°å¢ƒã§ã®CI/CDãƒ†ã‚¹ãƒˆ

### E. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥

**Vercelè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤:**

- **ãƒ‰ãƒ¡ã‚¤ãƒ³**: `https://www.vibe-coder.space`
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: GitHubé€£æºï¼ˆmainãƒ–ãƒ©ãƒ³ãƒpushæ™‚ï¼‰
- **ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤**: PRä½œæˆæ™‚ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤
- **ç’°å¢ƒå¤‰æ•°**: Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç®¡ç†

**Docker Hubé…å¸ƒï¼ˆãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç‰ˆã‹ã‚‰ï¼‰:**

- **ãƒ¬ã‚¸ã‚¹ãƒˆãƒª**: `jl1nie/vibe-coder:latest`
- **æ‰‹å‹•ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ—ãƒƒã‚·ãƒ¥**ï¼ˆMVPé–‹ç™ºæ™‚ï¼‰
- **ãƒãƒ«ãƒã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**: AMD64/ARM64å¯¾å¿œ
- **ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç‰ˆã‹ã‚‰ã®è‡ªå‹•åŒ–æ¤œè¨**

**ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆè¶…ç°¡å˜ï¼‰:**

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/your-username/vibe-coder.git
cd vibe-coder

# 2. ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# 3. Vibe Coder ã‚’èµ·å‹•
./scripts/vibe-coder start
# â†’ 8æ¡ã‚­ãƒ¼è¡¨ç¤ºã€ã‚¹ãƒãƒ›ã‹ã‚‰æ¥ç¶šå¾…æ©Ÿ
```

**vibe-coderã‚³ãƒãƒ³ãƒ‰ä»•æ§˜:**

- ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè‡ªå‹•ãƒã‚¦ãƒ³ãƒˆ
- Dockerè‡ªå‹•èµ·å‹•ãƒ»ãƒãƒ¼ãƒˆç®¡ç†
- ~/.claudeè¨­å®šè‡ªå‹•ãƒã‚¦ãƒ³ãƒˆ
- ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§ã®ç’°å¢ƒèµ·å‹•

## ğŸ“± UIã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

**React PWA ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: xterm.jsçµ±åˆãƒ»éŸ³å£°èªè­˜ãƒ»WebRTC P2Pé€šä¿¡å¯¾å¿œ

è©³ç´°ãªå®Ÿè£…ã¯ `apps/web/src/components/` ä»¥ä¸‹ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å‚ç…§ã€‚

---

## ğŸ“‹ ãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆå®Ÿæ–½ï¼ˆå¿…é ˆãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆï¼‰

### A. ãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆã®å¿…è¦æ€§

**MVPå®Œæˆå¾Œã¯å¿…ãšãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹**ã“ã¨ã§ã€å®Ÿéš›ã®ä½¿ç”¨ä½“é¨“ã‚’æ¤œè¨¼ã—ã€ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®å•é¡Œç‚¹ã‚’æ—©æœŸç™ºè¦‹ã™ã‚‹ã€‚Claude Codeã¨ã®çµ±åˆç’°å¢ƒã«ãŠã„ã¦ã€ç†è«–ä¸Šã®å‹•ä½œç¢ºèªã ã‘ã§ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã„èª²é¡Œã‚’ç‰¹å®šã™ã‚‹ã€‚

### B. ãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆå®Ÿæ–½æ–¹æ³•

**Phase 1: å†…éƒ¨æ¤œè¨¼ãƒ†ã‚¹ãƒˆ**

1. **åŸºæœ¬å‹•ä½œç¢ºèª**
   - ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆ8æ¡ã‚­ãƒ¼è¡¨ç¤ºç¢ºèªï¼‰
   - PWAã§ã®æ¥ç¶šãƒ»èªè¨¼ï¼ˆTOTPå…¥åŠ›ï¼‰
   - Claude Codeã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ»å‡ºåŠ›ç¢ºèª
   - éŸ³å£°å…¥åŠ›æ©Ÿèƒ½ï¼ˆAndroid/iPhoneï¼‰
   - ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆåˆ‡ã‚Šæ›¿ãˆ

2. **å®Ÿéš›ã®é–‹ç™ºã‚·ãƒŠãƒªã‚ªãƒ†ã‚¹ãƒˆ**

   ```
   ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªä¾‹ï¼š
   1. æ–°ã—ã„Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
   2. ãƒã‚°ä¿®æ­£ã¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
   3. APIé€£æºã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆ
   4. ãƒ¢ãƒã‚¤ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
   5. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆ
   ```

3. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒãƒ†ã‚¹ãƒˆ**
   - è‡ªå®…WiFiç’°å¢ƒ
   - ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿é€šä¿¡ï¼ˆ4G/5Gï¼‰
   - ä¼æ¥­ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«æœ‰ï¼‰
   - WebRTC P2Pæ¥ç¶šã®å®‰å®šæ€§ç¢ºèª

**Phase 2: å¤–éƒ¨ãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆ**

1. **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼**
   - ãƒ¢ãƒã‚¤ãƒ«é–‹ç™ºã«é–¢å¿ƒã®ã‚ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ 3-5å
   - Claude Codeãƒ¦ãƒ¼ã‚¶ãƒ¼ 2-3å
   - ãƒªãƒ¢ãƒ¼ãƒˆé–‹ç™ºçµŒé¨“è€… 2-3å

2. **ãƒ†ã‚¹ãƒˆç’°å¢ƒæº–å‚™**

   ```bash
   # ãƒ†ã‚¹ãƒˆç”¨ãƒ›ã‚¹ãƒˆç’°å¢ƒ
   git clone https://github.com/your-repo/vibe-coder
   npm install
   npm run dev
   # â†’ 8æ¡ã‚­ãƒ¼: 12345678
   # â†’ URL: https://www.vibe-coder.space (PWA)
   ```

3. **è¦³å¯Ÿãƒã‚¤ãƒ³ãƒˆ**
   - **åˆå›æ¥ç¶šæ™‚é–“**: 8æ¡ã‚­ãƒ¼å…¥åŠ›ã‹ã‚‰æ¥ç¶šå®Œäº†ã¾ã§
   - **ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ¬ã‚¹ãƒãƒ³ã‚¹**: Claude Codeå¿œç­”é€Ÿåº¦
   - **UIæ“ä½œæ„Ÿ**: ã‚¿ãƒƒãƒæ“ä½œã®ç›´æ„Ÿæ€§
   - **éŸ³å£°èªè­˜ç²¾åº¦**: è‡ªç„¶è¨€èªã‚³ãƒãƒ³ãƒ‰ã®èªè­˜ç‡
   - **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: æ¥ç¶šå¤±æ•—æ™‚ã®å¾©æ—§æ‰‹é †

### C. ãƒ†ã‚¹ãƒˆè©•ä¾¡åŸºæº–

**å¿…é ˆè¦ä»¶ï¼ˆã™ã¹ã¦æº€ãŸã™å¿…è¦ã‚ã‚Šï¼‰**

- [ ] 8æ¡ã‚­ãƒ¼å…¥åŠ›ã§30ç§’ä»¥å†…ã«æ¥ç¶šå®Œäº†
- [ ] Claude Codeã‚³ãƒãƒ³ãƒ‰ãŒæ­£å¸¸å®Ÿè¡Œã•ã‚Œã‚‹
- [ ] ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å‡ºåŠ›ãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] éŸ³å£°å…¥åŠ›ã§ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡ŒãŒå¯èƒ½
- [ ] ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆåˆ‡ã‚Šæ›¿ãˆãŒæ©Ÿèƒ½ã™ã‚‹
- [ ] æ¥ç¶šåˆ‡æ–­æ™‚ã®è‡ªå‹•å¾©æ—§ãŒå‹•ä½œã™ã‚‹

**UXè©•ä¾¡é …ç›®ï¼ˆ5æ®µéšè©•ä¾¡ï¼‰**

- **ç›´æ„Ÿæ€§**: åˆè¦‹ã§ã‚‚æ“ä½œæ–¹æ³•ãŒç†è§£ã§ãã‚‹ã‹
- **å¿œç­”æ€§**: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã€œçµæœè¡¨ç¤ºã®ä½“æ„Ÿé€Ÿåº¦
- **å®‰å®šæ€§**: é•·æ™‚é–“ä½¿ç”¨ã§ã®æ¥ç¶šå®‰å®šæ€§
- **ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–**: ã‚¹ãƒãƒ›ã§ã®æ“ä½œå¿«é©æ€§
- **å…¨ä½“æº€è¶³åº¦**: ç¶™ç¶šä½¿ç”¨ã—ãŸã„ã¨æ€ã†ã‹

**æ”¹å–„è¦æœ›ã®åé›†**

- æ“ä½œã§å›°ã£ãŸç‚¹ãƒ»åˆ†ã‹ã‚‰ãªã‹ã£ãŸç‚¹
- æœŸå¾…ã—ã¦ã„ãŸãŒå‹•ä½œã—ãªã‹ã£ãŸæ©Ÿèƒ½
- è¿½åŠ ã—ã¦ã»ã—ã„æ©Ÿèƒ½ãƒ»æ”¹å–„ç‚¹
- ä»–ã®é–‹ç™ºãƒ„ãƒ¼ãƒ«ã¨ã®æ¯”è¼ƒæ„Ÿæƒ³

### D. ãƒ†ã‚¹ãƒˆçµæœã®æ´»ç”¨

**Critical Issuesï¼ˆå³åº§ã«ä¿®æ­£ï¼‰**

- æ¥ç¶šã§ããªã„ãƒ»ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚¨ãƒ©ãƒ¼
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ‡¸å¿µ
- ãƒ‡ãƒ¼ã‚¿æå¤±ãƒ»ç ´æã®å¯èƒ½æ€§

**UX Improvementsï¼ˆå„ªå…ˆåº¦ä»˜ã‘ã¦æ”¹å–„ï¼‰**

- æ“ä½œæ‰‹é †ã®ç°¡ç•¥åŒ–
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ”¹å–„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- è¿½åŠ æ©Ÿèƒ½ã®å®Ÿè£…

**ãƒ†ã‚¹ãƒˆå®Œäº†ã®åˆ¤å®šåŸºæº–**

- å¿…é ˆè¦ä»¶100%é”æˆ
- UXè©•ä¾¡å¹³å‡4.0ä»¥ä¸Š
- Critical Issues 0ä»¶
- å¤–éƒ¨ãƒ†ã‚¹ã‚¿ãƒ¼ã®80%ä»¥ä¸ŠãŒã€Œç¶™ç¶šä½¿ç”¨ã—ãŸã„ã€ã¨å›ç­”

### E. ãƒ†ã‚¹ãƒˆå®Ÿæ–½ã‚¿ã‚¤ãƒŸãƒ³ã‚°

**MVPå®Œæˆæ™‚ç‚¹ï¼ˆå¿…é ˆï¼‰**

- ã™ã¹ã¦ã®ã‚³ã‚¢æ©Ÿèƒ½å®Ÿè£…å®Œäº†å¾Œ
- çµ±åˆãƒ†ã‚¹ãƒˆãƒ»E2Eãƒ†ã‚¹ãƒˆå®Œäº†å¾Œ
- æœ¬æ ¼ãƒªãƒªãƒ¼ã‚¹å‰ã®æœ€çµ‚æ¤œè¨¼

**ç¶™ç¶šçš„ãªãƒ†ã‚¹ãƒˆ**

- æ–°æ©Ÿèƒ½è¿½åŠ æ™‚ã®ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„å¾Œã®åŠ¹æœæ¸¬å®š
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œå¾Œã®å†æ¤œè¨¼

**ãƒ¦ãƒ¼ã‚¶ãƒ†ã‚¹ãƒˆå®Ÿæ–½å®Œäº†** â†’ **ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒªãƒªãƒ¼ã‚¹åˆ¤å®š**

---

## ğŸ·ï¸ é–‹ç™ºãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆãƒ»ãƒªãƒªãƒ¼ã‚¹å±¥æ­´

### v0.4.0-stable (2025-07-12)

**çµ±ä¸€WebRTCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å®Œæˆãƒ»å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆé€šéé”æˆğŸš€**

**WebRTCãƒ©ã‚¤ãƒ–ãƒ©ãƒªçµ±ä¸€å®Œäº†:**

- âœ… **Simple-peerå®Œå…¨å‰Šé™¤**: PWAãƒ»Hostä¸¡å´ã§Native WebRTC APIä½¿ç”¨
- âœ… **PWAå´**: ãƒ–ãƒ©ã‚¦ã‚¶ãƒã‚¤ãƒ†ã‚£ãƒ–RTCPeerConnectionç›´æ¥ä½¿ç”¨
- âœ… **Hostå´**: wrtcãƒ©ã‚¤ãƒ–ãƒ©ãƒª + RTCPeerConnectionçµ±åˆ
- âœ… **ç´”ç²‹WebSocketã‚·ã‚°ãƒŠãƒªãƒ³ã‚°**: Next.jså‰Šé™¤ãƒ»è»½é‡WebSocketã‚µãƒ¼ãƒãƒ¼

**ãƒ†ã‚¹ãƒˆçµæœ (æœ€çµ‚ç¢ºèª):**

```bash
# å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆé€šé
- shared: 40/40ãƒ†ã‚¹ãƒˆé€šé (100%) âœ…
- signaling: 9/9ãƒ†ã‚¹ãƒˆé€šé (100%) âœ…  
- host: 5/5 WebRTCé‡è¦ãƒ†ã‚¹ãƒˆé€šé âœ…
- web: 18/18 App.test.tsxé€šé âœ…
```

**æŠ€è¡“çš„æˆæœ:**

- âœ… **çµ±ä¸€API**: RTCPeerConnectionãƒ»RTCDataChannelãƒ»RTCIceCandidate
- âœ… **wrtcãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å‹•ä½œ**: 17.7MB linux-x64ãƒã‚¤ãƒŠãƒªæ­£å¸¸å‹•ä½œ
- âœ… **WebSocketç‹¬ç«‹åŒ–**: ãƒãƒ¼ãƒˆ5175ã§ã®ç´”ç²‹WebSocketã‚µãƒ¼ãƒãƒ¼
- âœ… **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å½¢å¼çµ±ä¸€**: JSONå½¢å¼ãƒ»DataChannelé€šä¿¡æ¨™æº–åŒ–

**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æœ€é©åŒ–:**

```typescript
// çµ±ä¸€ã•ã‚ŒãŸWebRTCæ¥ç¶šã‚³ãƒ¼ãƒ‰ï¼ˆPWA/Hostå…±é€šï¼‰
const pc = new RTCPeerConnection({
  iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
});
const dc = pc.createDataChannel('claude-commands');
```

### v0.3.3-alpha (2025-07-11)

**Phase 1å®Œå…¨é”æˆãƒ»ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆç’°å¢ƒæ§‹ç¯‰æˆåŠŸğŸ‰**

**ç’°å¢ƒè¨­å®šå®Œå…¨å®Ÿè£…:**

- âœ… **ãƒ‡ãƒ¥ã‚¢ãƒ«ç’°å¢ƒè¨­å®š**: `.env.production`(Vercel+Docker) / `.env.development`(Local+Docker)
- âœ… **å®Œå…¨ãªç’°å¢ƒå¤‰æ•°**: `VIBE_CODER_HOST_URL`è¿½åŠ ã§å…¨å¤‰æ•°å¯¾å¿œå®Œäº†
- âœ… **Dockerç’°å¢ƒå¤‰æ•°å•é¡Œè§£æ±º**: æ˜ç¤ºçš„export + UID/GIDå‹•çš„è¨­å®šã§å®‰å®šåŒ–
- âœ… **workspace pathçµ±ä¸€**: ã‚³ãƒ³ãƒ†ãƒŠå†…ãƒ‘ã‚¹ `/app/workspace` ã§æ¨©é™å•é¡Œå®Œå…¨è§£æ±º

**vibe-coderã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Œæˆ:**

- âœ… **ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³**: `./scripts/vibe-coder start` - Vercel PWA + Docker Host
- âœ… **é–‹ç™ºãƒ¢ãƒ¼ãƒ‰**: `./scripts/vibe-coder dev` - Local Next.js + Docker Host  
- âœ… **ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰åˆ‡ã‚Šæ›¿ãˆ**: ç’°å¢ƒåˆ¥è¨­å®šã®è‡ªå‹•èª­ã¿è¾¼ã¿ãƒ»æ¤œè¨¼

**å‹•ä½œæ¤œè¨¼å®Œäº†:**

- âœ… **Host IDæ°¸ç¶šåŒ–**: `27539093` ä¸¡ãƒ¢ãƒ¼ãƒ‰ã§å…±é€šä½¿ç”¨
- âœ… **Health APIæ­£å¸¸**: `{"status":"degraded","uptime":6.24}` å¿œç­”ç¢ºèª
- âœ… **ãƒ‡ãƒ¥ã‚¢ãƒ«ã‚µãƒ¼ãƒãƒ¼**: Host(8080) + PWA/Signaling(5174) åŒæ™‚èµ·å‹•æˆåŠŸ
- âœ… **Dockerå®‰å®šæ€§**: å†èµ·å‹•ãƒ«ãƒ¼ãƒ—å•é¡Œå®Œå…¨è§£æ±ºãƒ»å¥å…¨æ€§ç¢ºèªæ¸ˆã¿

**æŠ€è¡“åŸºç›¤ç¢ºç«‹:**

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ (Vercel PWA + Docker Host)
./scripts/vibe-coder start
â†’ Host ID: 27539093, Port: 8080, PWA: https://vibe-coder.space

# é–‹ç™º (Localç’°å¢ƒ3ã‚³ãƒ³ãƒ†ãƒŠæ§‹æˆ)  
./scripts/vibe-coder dev
â†’ PWA: localhost:5174, Signaling: localhost:5175, Host: localhost:8080
```

**å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ100%é€šéå®Œäº†:**

- âœ… **signaling**: 12/12ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
- âœ… **shared**: 40/40ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
- âœ… **web**: 21/21ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
- âœ… **host**: 47/47ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
- âœ… **åˆè¨ˆ**: 120ä»¶ã™ã¹ã¦é€šéãƒ»ãƒ†ã‚¹ãƒˆå“è³ª100%é”æˆ

**MVPå®ŒæˆçŠ¶æ³: 100%ğŸš€**

- ã‚³ã‚¢æ©Ÿèƒ½: 100%å®Œæˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†: 100%å®Œæˆ  
- UI/UX: 100%å®Œæˆ
- ãƒ†ã‚¹ãƒˆå“è³ª: 100%å®Œæˆ
- **ç’°å¢ƒæ§‹ç¯‰: 100%å®Œæˆ** âœ¨ (NEW!)
- **Dockerç’°å¢ƒ: 100%å®Œæˆ** âœ¨

**æ¬¡ãƒ•ã‚§ãƒ¼ã‚º: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãƒ†ã‚¹ãƒˆ**

- âœ… WebRTC P2Pæ¥ç¶šå®‰å®šæ€§æ¤œè¨¼å®Œäº†
- ğŸ”„ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãƒ†ã‚¹ãƒˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†
- ğŸ“‹ éŸ³å£°èªè­˜ç²¾åº¦ãƒ»ãƒ¢ãƒã‚¤ãƒ«å®Ÿæ©Ÿæ¤œè¨¼

- **sessionId/hostIdã®çµ±ä¸€é‹ç”¨**
  - PWAå´ã®WebRTCã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ç”¨sessionIdã‚’2FAèªè¨¼ã§å–å¾—ã—ãŸstate.auth.sessionIdã«çµ±ä¸€ã€‚
  - ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒå´ã‚‚èªè¨¼ãƒ»ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ãƒ»WebRTCç®¡ç†ã™ã¹ã¦ã§åŒã˜sessionIdã‚’åˆ©ç”¨ã€‚
- **CORSãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®æ•´ç†**
  - signaling/pages/api/signal.tsã§CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆOriginã”ã¨ã«1ã¤ã ã‘è¿”ã™ã‚ˆã†ä¿®æ­£ã€‚
  - ã‚³ãƒãƒ³ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆsecurity.tsï¼‰ã¯ç©ºæ–‡å­—ãƒ»å‹ãƒã‚§ãƒƒã‚¯ã®ã¿ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã«ã€‚
  - Docker entrypointã§UID/GIDã‚’ãƒ›ã‚¹ãƒˆã¨åˆã‚ã›ã¦èµ·å‹•ã—ã€ãƒã‚¦ãƒ³ãƒˆå…ˆã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å•é¡Œã‚’è§£æ¶ˆã€‚
- **UI/UXæ”¹å–„**
  - é›»æºOFFï¼ˆPowerï¼‰ãƒœã‚¿ãƒ³ã§/exité€ä¿¡ã€ãƒã‚¤ã‚¯ï¼ˆMicï¼‰ãƒœã‚¿ãƒ³ã®ä½ç½®èª¿æ•´ã€ã‚«ãƒ¼ã‚½ãƒ«ä¸Šä¸‹ãƒœã‚¿ãƒ³ã®å¾©æ´»ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³é †ã®æ•´ç†ãªã©ç´°ã‹ãªUIæ”¹å–„ã€‚
- **ãƒ†ã‚¹ãƒˆãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼ã®æ˜ç¢ºåŒ–**
  - ã€Œæ‰‹å‹•vercel devâ†’npm startâ†’pnpm test:e2eã€ãªã©ã€ãƒ†ã‚¹ãƒˆãƒ»é‹ç”¨æ‰‹é †ã‚’æ˜ç¢ºåŒ–ã€‚
  - Claude CLIã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã‚„Dockerã‚¤ãƒ¡ãƒ¼ã‚¸å†…ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚‚æœ¬ç•ªä»•æ§˜ã«çµ±ä¸€ã€‚

### ã€åŠ¹æœãƒ»ä»Šå¾Œã®æ–¹é‡ã€‘

- Edge Functionã®statelesså•é¡Œã‚’å›é¿ã—ã€å®‰å®šã—ãŸWebRTCã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã‚’å®Ÿç¾ã€‚
- PWAã¨APIã®ä¸€å…ƒé‹ç”¨ã§ä¿å®ˆæ€§ãƒ»æ‹¡å¼µæ€§ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤åŠ¹ç‡ãŒå¤§å¹…å‘ä¸Šã€‚
- sessionId/hostIdã®ä¸€æ„æ€§ãƒ»æ•´åˆæ€§ãŒæ‹…ä¿ã•ã‚Œã€èªè¨¼ãƒ»æ¥ç¶šã®ä¸æ•´åˆãŒè§£æ¶ˆã€‚
- CORS/ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£/ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³/UXã‚‚æ•´ç†ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã¨é‹ç”¨ã®å®‰å®šæ€§ãŒå‘ä¸Šã€‚

### ã€æ›´ã«å¤‰æ›´ãŒå¿…è¦ã«ãªã£ãŸç†ç”±ã€‘

- Edge Functionï¼ˆServerlessï¼‰ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ãƒ¡ãƒ¢ãƒªãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ãŸã‚ã€WebRTCã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã®Offer/Answerç®¡ç†ãŒã§ããšã€ŒAnswer not foundã€ç­‰ã®ä¸æ•´åˆãŒé »ç™ºã€‚
- PWAã¨ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒé–“ã§sessionId/hostIdã®ä¸€æ„æ€§ãƒ»æ•´åˆæ€§ãŒå–ã‚Œãšã€èªè¨¼ãƒ»æ¥ç¶šã®å¤±æ•—ã‚„ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸ä¸€è‡´ãŒç™ºç”Ÿã€‚
- signalingã‚µãƒ¼ãƒã®CORSãƒ˜ãƒƒãƒ€ãƒ¼ãŒè¤‡æ•°å€¤ã§è¿”ã‚‹ãªã©ã€ãƒ–ãƒ©ã‚¦ã‚¶å´ã§CORSã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã‚„ã™ã‹ã£ãŸã€‚
- Dockerãƒã‚¦ãƒ³ãƒˆå…ˆã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ä¸æ•´åˆã‚„UID/GIDä¸ä¸€è‡´ã«ã‚ˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿ã‚¨ãƒ©ãƒ¼ã€‚
- UI/UXè¦ä»¶ã®é«˜åº¦åŒ–ï¼ˆã‚¹ãƒãƒ›æœ€é©åŒ–ãƒ»æ“ä½œæ€§ãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰ã«ä¼´ã„ã€å¾“æ¥æ§‹æˆã§ã¯æŸ”è»Ÿãªæ”¹å–„ãŒå›°é›£ã ã£ãŸã€‚

### ã€å®Ÿè£…ä¸Šã®ãƒã‚¤ãƒ³ãƒˆã€‘

- sessionId/hostIdã‚’2FAèªè¨¼æ™‚ã«ä¸€å…ƒç”Ÿæˆã—ã€PWAãƒ»APIãƒ»ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒå…¨ä½“ã§çµ±ä¸€ç®¡ç†ã€‚
- Vercelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã€Œsignalingã€ã«çµ±åˆã—ã€PWAã®ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã‚’signaling/public/ã«é…ç½®ã€‚
- signaling/pages/api/signal.tsã§CORSãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆOriginã”ã¨ã«1ã¤ã ã‘è¿”ã™ãƒ­ã‚¸ãƒƒã‚¯ã«ä¿®æ­£ã€‚
- Docker entrypointã§UID/GIDã‚’ãƒ›ã‚¹ãƒˆã¨åŒæœŸã—ã€ãƒã‚¦ãƒ³ãƒˆå…ˆã®ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å•é¡Œã‚’æ ¹æœ¬è§£æ±ºã€‚
- ã‚³ãƒãƒ³ãƒ‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆsecurity.tsï¼‰ã¯ç©ºæ–‡å­—ãƒ»å‹ãƒã‚§ãƒƒã‚¯ã®ã¿ã®ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ã«ã€‚
- UI/UXã¯PWAã®ç´°éƒ¨ï¼ˆãƒœã‚¿ãƒ³é…ç½®ãƒ»ã‚¢ã‚¤ã‚³ãƒ³é †ãƒ»ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œãƒ»ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ç­‰ï¼‰ã¾ã§èª¿æ•´ã€‚
- ãƒ†ã‚¹ãƒˆãƒ»é‹ç”¨ãƒ•ãƒ­ãƒ¼ï¼ˆæ‰‹å‹•vercel devâ†’npm startâ†’pnpm test:e2eç­‰ï¼‰ã‚’æ˜ç¢ºåŒ–ã—ã€é–‹ç™ºãƒ»CI/CDã®å†ç¾æ€§ã‚’æ‹…ä¿ã€‚

---

## ğŸš€ 2025å¹´7æœˆ8æ—¥æ™‚ç‚¹ - æ¬¡æœŸé–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### ã€ç¾åœ¨ã®å®ŒæˆçŠ¶æ³ã€‘MVP 100%é”æˆ ğŸ‰

**âœ… å®Œæˆæ¸ˆã¿é …ç›®:**
- PWAçµ±åˆãƒ»signalingãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€å…ƒåŒ–ï¼ˆå®Œäº†ï¼‰
- sessionId/hostIdçµ±ä¸€ç®¡ç†ï¼ˆå®Œäº†ï¼‰
- CORSå•é¡Œè§£æ±ºãƒ»Edge Function statelesså¯¾å¿œï¼ˆå®Œäº†ï¼‰
- å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä¿®æ­£ãƒ»å®Ÿè¡Œå®Œäº†ï¼ˆå®Œäº†ï¼‰
  - signaling: 12/12ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
  - shared: 40/40ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰
  - host: 47/47ãƒ†ã‚¹ãƒˆé€šéï¼ˆ100%ï¼‰ â† **æ–°ãŸã«ä¿®æ­£å®Œäº†ï¼**
- 2025å¹´7æœˆä»•æ§˜å¤‰æ›´å®Ÿè£…å®Œäº†ï¼ˆå®Œäº†ï¼‰
- Dockeræ¨©é™å•é¡Œè§£æ±ºå®Œäº†ï¼ˆå®Œäº†ï¼‰

**ğŸš€ æŠ€è¡“çš„å®‰å®šåŒ–å®Œäº†:**
- Phase 1.1: hostãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆä¿®æ­£ï¼ˆâœ…å®Œäº†ï¼‰
- Phase 1.2: Dockeræ¨©é™å•é¡Œæ ¹æœ¬è§£æ±ºï¼ˆâœ…å®Œäº†ï¼‰

### ã€æ¬¡æœŸãƒ•ã‚§ãƒ¼ã‚º 1: æŠ€è¡“çš„å®‰å®šåŒ–ï¼ˆå„ªå…ˆåº¦: æœ€é«˜ï¼‰ã€‘

**Phase 1.1: ãƒ†ã‚¹ãƒˆç’°å¢ƒå®Œå…¨ä¿®æ­£ï¼ˆå³åº§å®Ÿè¡Œï¼‰**
- [ ] host ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚³ãƒãƒ³ãƒ‰è§£æãƒ†ã‚¹ãƒˆä¿®æ­£
- [ ] Claude Codeèªè¨¼ãƒ†ã‚¹ãƒˆ ã® Dockeræ¨©é™å¯¾å¿œ
- [ ] å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ†ã‚¹ãƒˆ 100%é€šéç¢ºèª

**Phase 1.2: Dockeræ¨©é™å•é¡Œæ ¹æœ¬è§£æ±º**
- [ ] Claude Code /app ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ¨©é™å•é¡Œèª¿æŸ»
- [ ] Docker entrypoint ã§ã®UID/GIDåŒæœŸä¿®æ­£
- [ ] vibe-coderã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã®æ¨©é™è¨­å®šç¢ºèª

**Phase 1.3: çµ±åˆãƒ†ã‚¹ãƒˆãƒ»æœ¬æ ¼é‹ç”¨ç¢ºèª**
- [ ] æ‰‹å‹• vercel dev â†’ npm start â†’ å®Ÿæ©Ÿæ¥ç¶šãƒ†ã‚¹ãƒˆ
- [ ] PWA + ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ + WebRTC P2P å®Œå…¨å‹•ä½œç¢ºèª
- [ ] ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ï¼ˆAndroid/iPhoneï¼‰å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ

### ã€æ¬¡æœŸãƒ•ã‚§ãƒ¼ã‚º 2: ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šï¼ˆå„ªå…ˆåº¦: é«˜ï¼‰ã€‘

**Phase 2.1: å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†**
- [ ] é–‹ç™ºãƒãƒ¼ãƒ å†…ã§ã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] éŸ³å£°èªè­˜ç²¾åº¦ãƒ»WebRTCæ¥ç¶šå®‰å®šæ€§æ¤œè¨¼
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å•é¡Œç‚¹ã®ç‰¹å®šãƒ»å„ªå…ˆåº¦ä»˜ã‘

**Phase 2.2: UXæ”¹å–„å®Ÿè£…**
---

### v0.5.0-beta (2025-07-15)

**WebSocketã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼å®Œå…¨ç§»è¡Œãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æœ€é©åŒ–å®Œäº†ğŸ¯**

**æŠ€è¡“çš„ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°:**

- âœ… **Pure WebSocketã‚µãƒ¼ãƒãƒ¼ç§»è¡Œ**: Next.jså®Œå…¨å‰Šé™¤ã€å°‚ç”¨WebSocketã‚µãƒ¼ãƒãƒ¼å®Ÿè£…
- âœ… **packages/signaling-wsæ–°è¨­**: è»½é‡ãƒ»é«˜é€Ÿãªã‚·ã‚°ãƒŠãƒªãƒ³ã‚°ã‚µãƒ¼ãƒãƒ¼
- âœ… **ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«å¤§é‡å‰Šé™¤**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã€å¤ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ãƒ¬ãƒãƒ¼ãƒˆç­‰
- âœ… **docker-composeæœ€é©åŒ–**: versionè¨­å®šå‰Šé™¤ã€ãƒ¢ãƒ€ãƒ³æ§‹æˆã¸

**å‰Šé™¤ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¸»è¦ãªã‚‚ã®ï¼‰:**

```
- ENVIRONMENT_RULES.md
- FAST_TEST_PLAN.md
- PROCESS_CHECK_RULES.md
- USER_TEST_GUIDE.md
- signaling-server/ ï¼ˆæ—§å®Ÿè£…ï¼‰
- playwright-report/ ï¼ˆä¸è¦ãªãƒ¬ãƒãƒ¼ãƒˆï¼‰
- scripts/deploy.sh, dev-start.sh, dev-stop.shç­‰
- packages/signaling/pages/, next.config.jsç­‰
```

**æ–°è¦è¿½åŠ ãƒ»æ›´æ–°:**

```
+ packages/signaling-ws/ ï¼ˆæ–°WebSocketã‚µãƒ¼ãƒãƒ¼ï¼‰
+ å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«vitest.config.tsè¿½åŠ 
+ .vibe-coder.local.example, .production.example
+ ARCHITECTURE-MIGRATION-PLAN.md
```

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆã®ç°¡ç´ åŒ–:**

- ç·ãƒ•ã‚¡ã‚¤ãƒ«æ•°: ç´„40%å‰Šæ¸›
- ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®å¯èª­æ€§å‘ä¸Š
- ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ã®å¤§å¹…æ”¹å–„
- CI/CDå®Ÿè¡Œæ™‚é–“ã®çŸ­ç¸®

---

### v0.6.0-alpha (2025-07-17)

**WebRTC P2Pæ¥ç¶šãƒ»ICEå€™è£œç”Ÿæˆãƒ»ã‚·ã‚°ãƒŠãƒªãƒ³ã‚°æ¥ç¶šå•é¡Œè§£æ±ºğŸ”§**

**é‡è¦ãªä¿®æ­£:**

- âœ… **TOTPèªè¨¼å¾ŒWebRTCæ¥ç¶šåˆæœŸåŒ–**: apps/web/src/App.tsx:578ã§èªè¨¼æˆåŠŸå¾Œã®P2Pæ¥ç¶šç¢ºç«‹ã‚’å®Ÿè£…
- âœ… **ãƒ›ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼WebSocketãƒ—ãƒ­ãƒˆã‚³ãƒ«ä¿®æ­£**: packages/host/src/services/webrtc-service.ts:100-105ã§Docker bridge IP(172.17.0.1)ã«å¯¾ã—ws://ãƒ—ãƒ­ãƒˆã‚³ãƒ«ä½¿ç”¨
- âœ… **RFC 8445æº–æ‹ ICEå€™è£œåé›†**: STUN serversæœ‰åŠ¹åŒ–ãƒ»host/server-reflexiveå€™è£œã®é©åˆ‡ãªç”Ÿæˆç¢ºèª
- âœ… **E2E ãƒ†ã‚¹ãƒˆå•é¡Œç‰¹å®š**: WebRTC P2Pæ¥ç¶šæœªç¢ºç«‹ã«ã‚ˆã‚‹ãƒ†ã‚¹ãƒˆå¤±æ•—ã®æ ¹æœ¬åŸå› è§£æ±º

**æŠ€è¡“çš„èª²é¡Œè§£æ±º:**

```typescript
// ä¿®æ­£å‰: èªè¨¼ã®ã¿ã§P2Pæ¥ç¶šãªã—
const authenticateHost = async (hostId: string, totpCode: string) => {
  // èªè¨¼ã®ã¿
  setState(prev => ({ ...prev, auth: { ...prev.auth, isAuthenticated: true } }));
};

// ä¿®æ­£å¾Œ: èªè¨¼æˆåŠŸå¾Œã«WebRTC P2Pæ¥ç¶šåˆæœŸåŒ–
const authenticateHost = async (hostId: string, totpCode: string) => {
  // èªè¨¼å‡¦ç†
  setState(prev => ({ ...prev, auth: { ...prev.auth, isAuthenticated: true } }));
  
  // WebRTC P2Pæ¥ç¶šåˆæœŸåŒ–
  await initializeWebRTCConnection();
};
```

**WebSocketæ¥ç¶šå•é¡Œè§£æ±º:**

```typescript
// ä¿®æ­£å‰: Docker bridge IPã§wss://ä½¿ç”¨ï¼ˆSSL handshake errorï¼‰
const protocol = config.signalingUrl.includes('localhost') ? 'ws' : 'wss';

// ä¿®æ­£å¾Œ: Dockerç’°å¢ƒã§ws://ä½¿ç”¨
const isLocalDevelopment = config.signalingUrl.includes('localhost') || 
                          config.signalingUrl.includes('vibe-coder-signaling') ||
                          config.signalingUrl.includes('172.17.0.1') ||
                          config.signalingUrl.includes('127.0.0.1');
const protocol = isLocalDevelopment ? 'ws' : 'wss';
```

**ICEå€™è£œç”ŸæˆçŠ¶æ³:**

- âœ… **RFC 8445æº–æ‹ **: STUNã‚µãƒ¼ãƒãƒ¼æœ‰åŠ¹åŒ–ã«ã‚ˆã‚‹server-reflexiveå€™è£œç”Ÿæˆ
- âœ… **è©³ç´°ãƒ­ã‚°**: ICEå€™è£œã‚¿ã‚¤ãƒ—ï¼ˆhost/srflx/prflx/relayï¼‰ã®åˆ†æãƒ»ç¢ºèªæ©Ÿèƒ½
- âœ… **P2Pæ¥ç¶šç¢ºç«‹**: DataChannel openå¾Œã®æ¥ç¶šæˆåŠŸé€šçŸ¥

**æ¬¡ã‚¹ãƒ†ãƒƒãƒ—:**

- WebRTC P2Pæ¥ç¶šã®å®‰å®šæ€§æ¤œè¨¼
- ICEå€™è£œç”Ÿæˆã®å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ
- ãƒ¢ãƒã‚¤ãƒ«ãƒ‡ãƒã‚¤ã‚¹ã§ã®æ¥ç¶šãƒ†ã‚¹ãƒˆ

---

</rewritten_file>
